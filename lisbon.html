<script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
<script
    src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
<div id="map"></div>
<style>
    html,
    body,
    #map {
        height: 100%;
        margin: 0;
        padding: 0;
    }
</style>
<script>
    function initMap() {
        // map options
        var options = {
            zoom: 7,
            center: {
                lat: 38.6966237,
                lng: -9.2239746
            }
        }
        var map = new google.maps.Map(document.getElementById('map'), options);
        // Add a marker clusterer to manage the markers.

        //Add marker

        var markers = [
            {
                "coords": {
                    "lat": 38.7289498,
                    "lng": -9.149320699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7425446,
                    "lng": -9.1314155
                }
            },
            {
                "coords": {
                    "lat": 38.7310683,
                    "lng": -9.1154353
                }
            },
            {
                "coords": {
                    "lat": 38.7243086,
                    "lng": -9.1630861
                }
            },
            {
                "coords": {
                    "lat": 38.7501646,
                    "lng": -9.1488146
                }
            },
            {
                "coords": {
                    "lat": 38.7483289,
                    "lng": -9.208354199999999
                }
            },
            {
                "coords": {
                    "lat": 38.7255568,
                    "lng": -9.1177236
                }
            },
            {
                "coords": {
                    "lat": 38.7626677,
                    "lng": -9.1738459
                }
            },
            {
                "coords": {
                    "lat": 38.7925894,
                    "lng": -9.0985622
                }
            },
            {
                "coords": {
                    "lat": 38.7300467,
                    "lng": -9.1614998
                }
            },
            {
                "coords": {
                    "lat": 38.7737564,
                    "lng": -9.153521699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7445866,
                    "lng": -9.153675200000002
                }
            },
            {
                "coords": {
                    "lat": 38.71620770000001,
                    "lng": -9.169548899999999
                }
            },
            {
                "coords": {
                    "lat": 38.7066745,
                    "lng": -9.2394913
                }
            },
            {
                "coords": {
                    "lat": 38.7699036,
                    "lng": -9.100869699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7654098,
                    "lng": -9.153935599999999
                }
            },
            {
                "coords": {
                    "lat": 38.7213451,
                    "lng": -9.1482073
                }
            },
            {
                "coords": {
                    "lat": 38.7489153,
                    "lng": -9.1775992
                }
            },
            {
                "coords": {
                    "lat": 38.7048248,
                    "lng": -9.1976059
                }
            },
            {
                "coords": {
                    "lat": 38.7728314,
                    "lng": -9.1514065
                }
            },
            {
                "coords": {
                    "lat": 38.7462713,
                    "lng": -9.165049999999999
                }
            },
            {
                "coords": {
                    "lat": 38.744195,
                    "lng": -9.1282712
                }
            },
            {
                "coords": {
                    "lat": 38.78004079999999,
                    "lng": -9.121580699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7454245,
                    "lng": -9.1802488
                }
            },
            {
                "coords": {
                    "lat": 38.7498544,
                    "lng": -9.1312609
                }
            },
            {
                "coords": {
                    "lat": 38.7134674,
                    "lng": -9.2143803
                }
            },
            {
                "coords": {
                    "lat": 38.7766684,
                    "lng": -9.0949257
                }
            },
            {
                "coords": {
                    "lat": 38.7289498,
                    "lng": -9.149320699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7483289,
                    "lng": -9.208354199999999
                }
            },
            {
                "coords": {
                    "lat": 38.7255568,
                    "lng": -9.1177236
                }
            },
            {
                "coords": {
                    "lat": 38.7501646,
                    "lng": -9.1488146
                }
            },
            {
                "coords": {
                    "lat": 38.7925894,
                    "lng": -9.0985622
                }
            },
            {
                "coords": {
                    "lat": 38.7425446,
                    "lng": -9.1314155
                }
            },
            {
                "coords": {
                    "lat": 38.71620770000001,
                    "lng": -9.169548899999999
                }
            },
            {
                "coords": {
                    "lat": 38.7243086,
                    "lng": -9.1630861
                }
            },
            {
                "coords": {
                    "lat": 38.7626677,
                    "lng": -9.1738459
                }
            },
            {
                "coords": {
                    "lat": 38.7048248,
                    "lng": -9.1976059
                }
            },
            {
                "coords": {
                    "lat": 38.7066745,
                    "lng": -9.2394913
                }
            },
            {
                "coords": {
                    "lat": 38.744195,
                    "lng": -9.1282712
                }
            },
            {
                "coords": {
                    "lat": 38.7728314,
                    "lng": -9.1514065
                }
            },
            {
                "coords": {
                    "lat": 38.7489153,
                    "lng": -9.1775992
                }
            },
            {
                "coords": {
                    "lat": 38.7300467,
                    "lng": -9.1614998
                }
            },
            {
                "coords": {
                    "lat": 38.7310683,
                    "lng": -9.1154353
                }
            },
            {
                "coords": {
                    "lat": 38.7445866,
                    "lng": -9.153675200000002
                }
            },
            {
                "coords": {
                    "lat": 38.7737564,
                    "lng": -9.153521699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7096746,
                    "lng": -9.152298799999999
                }
            },
            {
                "coords": {
                    "lat": 38.7699036,
                    "lng": -9.100869699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7812912,
                    "lng": -9.0980372
                }
            },
            {
                "coords": {
                    "lat": 38.7755465,
                    "lng": -9.1511903
                }
            },
            {
                "coords": {
                    "lat": 38.7628101,
                    "lng": -9.1474735
                }
            },
            {
                "coords": {
                    "lat": 38.7280082,
                    "lng": -9.1623783
                }
            },
            {
                "coords": {
                    "lat": 38.7812912,
                    "lng": -9.0980372
                }
            },
            {
                "coords": {
                    "lat": 38.7424048,
                    "lng": -9.1368711
                }
            },
            {
                "coords": {
                    "lat": 38.7050564,
                    "lng": -9.180971999999999
                }
            },
            {
                "coords": {
                    "lat": 38.6966237,
                    "lng": -9.2239746
                }
            },
            {
                "coords": {
                    "lat": 38.712005,
                    "lng": -9.1381874
                }
            },
            {
                "coords": {
                    "lat": 38.7639275,
                    "lng": -9.161452500000001
                }
            },
            {
                "coords": {
                    "lat": 38.7364177,
                    "lng": -9.151289199999999
                }
            },
            {
                "coords": {
                    "lat": 38.7477496,
                    "lng": -9.186895999999999
                }
            },
            {
                "coords": {
                    "lat": 38.7408886,
                    "lng": -9.1570088
                }
            },
            {
                "coords": {
                    "lat": 38.7391601,
                    "lng": -9.1470692
                }
            },
            {
                "coords": {
                    "lat": 38.7083482,
                    "lng": -9.2323059
                }
            },
            {
                "coords": {
                    "lat": 38.75215379999999,
                    "lng": -9.1662365
                }
            },
            {
                "coords": {
                    "lat": 38.70236,
                    "lng": -9.168411599999999
                }
            },
            {
                "coords": {
                    "lat": 38.7438899,
                    "lng": -9.1530431
                }
            },
            {
                "coords": {
                    "lat": 38.7755465,
                    "lng": -9.1511903
                }
            },
            {
                "coords": {
                    "lat": 38.7628101,
                    "lng": -9.1474735
                }
            },
            {
                "coords": {
                    "lat": 38.6966237,
                    "lng": -9.2239746
                }
            },
            {
                "coords": {
                    "lat": 38.712005,
                    "lng": -9.1381874
                }
            },
            {
                "coords": {
                    "lat": 38.7424048,
                    "lng": -9.1368711
                }
            },
            {
                "coords": {
                    "lat": 38.7050564,
                    "lng": -9.180971999999999
                }
            },
            {
                "coords": {
                    "lat": 38.7639275,
                    "lng": -9.161452500000001
                }
            },
            {
                "coords": {
                    "lat": 38.7408886,
                    "lng": -9.1570088
                }
            },
            {
                "coords": {
                    "lat": 38.70236,
                    "lng": -9.168411599999999
                }
            },
            {
                "coords": {
                    "lat": 38.7280082,
                    "lng": -9.1623783
                }
            },
            {
                "coords": {
                    "lat": 38.7438899,
                    "lng": -9.1530431
                }
            },
            {
                "coords": {
                    "lat": 38.75215379999999,
                    "lng": -9.1662365
                }
            },
            {
                "coords": {
                    "lat": 38.7477496,
                    "lng": -9.186895999999999
                }
            },
            {
                "coords": {
                    "lat": 38.7364177,
                    "lng": -9.151289199999999
                }
            },
            {
                "coords": {
                    "lat": 38.7391601,
                    "lng": -9.1470692
                }
            },
            {
                "coords": {
                    "lat": 38.7083482,
                    "lng": -9.2323059
                }
            },
            {
                "coords": {
                    "lat": 38.7244249,
                    "lng": -9.1605777
                }
            },
            {
                "coords": {
                    "lat": 38.7445504,
                    "lng": -9.1793427
                }
            },
            {
                "coords": {
                    "lat": 38.7816128,
                    "lng": -9.1499104
                }
            },
            {
                "coords": {
                    "lat": 38.7619577,
                    "lng": -9.1626956
                }
            },
            {
                "coords": {
                    "lat": 38.76853759999999,
                    "lng": -9.1211251
                }
            },
            {
                "coords": {
                    "lat": 38.6999877,
                    "lng": -9.356184599999999
                }
            },
            {
                "coords": {
                    "lat": 38.7699205,
                    "lng": -9.0976333
                }
            },
            {
                "coords": {
                    "lat": 39.39987199999999,
                    "lng": -8.224454
                }
            },
            {
                "coords": {
                    "lat": 38.7539039,
                    "lng": -9.1658078
                }
            },
            {
                "coords": {
                    "lat": 38.7244249,
                    "lng": -9.1605777
                }
            },
            {
                "coords": {
                    "lat": 38.7816128,
                    "lng": -9.1499104
                }
            },
            {
                "coords": {
                    "lat": 38.7445504,
                    "lng": -9.1793427
                }
            },
            {
                "coords": {
                    "lat": 38.7699205,
                    "lng": -9.0976333
                }
            },
            {
                "coords": {
                    "lat": 39.39987199999999,
                    "lng": -8.224454
                }
            },
            {
                "coords": {
                    "lat": 38.76853759999999,
                    "lng": -9.1211251
                }
            },
            {
                "coords": {
                    "lat": 38.7539039,
                    "lng": -9.1658078
                }
            },
            {
                "coords": {
                    "lat": 38.7619577,
                    "lng": -9.1626956
                }
            },
            {
                "coords": {
                    "lat": 38.6999877,
                    "lng": -9.356184599999999
                }
            },
            {
                "coords": {
                    "lat": 38.742936,
                    "lng": -9.1273904
                }
            },
            {
                "coords": {
                    "lat": 38.754097,
                    "lng": -9.2046171
                }
            },
            {
                "coords": {
                    "lat": 38.7543404,
                    "lng": -9.1904425
                }
            },
            {
                "coords": {
                    "lat": 38.7835049,
                    "lng": -9.095370599999999
                }
            },
            {
                "coords": {
                    "lat": 38.78004079999999,
                    "lng": -9.121580699999999
                }
            },
            {
                "coords": {
                    "lat": 38.7454245,
                    "lng": -9.1802488
                }
            },
            {
                "coords": {
                    "lat": 38.76291459999999,
                    "lng": -9.1051975
                }
            },
            {
                "coords": {
                    "lat": 38.7107534,
                    "lng": -9.140841100000001
                }
            },
            {
                "coords": {
                    "lat": 38.7550146,
                    "lng": -9.1789925
                }
            },
            {
                "coords": {
                    "lat": 38.7532344,
                    "lng": -9.1980255
                }
            },
            {
                "coords": {
                    "lat": 38.7071292,
                    "lng": -9.1895098
                }
            },
            {
                "coords": {
                    "lat": 38.7835049,
                    "lng": -9.095370599999999
                }
            },
            {
                "coords": {
                    "lat": 38.7071292,
                    "lng": -9.1895098
                }
            }
        ]

        // Loop through markers
        var gmarkers = [];
        for (var i = 0; i < markers.length; i++) {
            gmarkers.push(addMarker(markers[i]));

        }

        //Add MArker function
        function addMarker(props) {
            var marker = new google.maps.Marker({
                position: props.coords,
                map: map,

            });

            //Check content
            if (props.content) {
                var infoWindow = new google.maps.InfoWindow({
                    content: props.content
                });
                marker.addListener('click', function () {
                    infoWindow.open(map, marker);
                });
            }
            return marker;
        }
        var markerCluster = new MarkerClusterer(map, gmarkers, {
            imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
        });
    }
    google.maps.event.addDomListener(window, 'load', initMap)
</script>